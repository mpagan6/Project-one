<!DOCTYPE html>
<html lang="en">
<head>
  <title>LayOut</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
 <link rel="stylesheet" type="text/css" href="assets/css/style.css">

 <script type="text/javascript" src="assets/javascript/game.js"></script>


 <style type="text/css">
body {
  background-image: url("assets/images/uberCar.jpg");
}
.control-pannel {
 
    height: 100%;
    width: 100%;
    margin: auto;
    overflow: 0;
    padding: 40px;
   
}
.btn {
    width: 125px;
    padding: 10px;
}
.btn span.t {         
  opacity: 0;       
}
.btn.active span.t {        
  opacity: 1;    
}

.direction-btns {
  text-align: center;
}

 </style>

 <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 600px;
        width: 100%;

      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 100%;
        margin: 0px;
        padding: 20px;
      }*/
      #floating-panel {
        position: absolute;
        top: 10px;
        left: 25%;
        z-index: 5;
        background-color: #fff;
        padding: 5px;
        border: 0px solid #999;
        text-align: center;
        font-family: 'Roboto','sans-serif';
        line-height: 30px;
        padding-left: 10px;

      }
    </style>


  

</head>
<body>

<nav class="navbar navbar-default">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li class="active"><a href="#">Uber Game <span class="sr-only">(current)</span></a></li>
      </ul>
      <form class="navbar-form navbar-right">
        <div class="form-group">
          <input type="text" class="form-control" placeholder="Enter You Name">
        </div>
        <button type="submit" class="btn btn-default">Go</button>
        <button type="button" class="btn btn-info" data-toggle="modal" data-target="#myModal">
            <span class="glyphicon glyphicon-info-sign"></span> How To Play</button>


      <!-- Modal -->
    <div class="modal fade" id="myModal" role="dialog">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h2 class="modal-title">Welcome to the world of Uber Driving!</h2>
            </div>
            <div class="modal-body">
              <!--Model content here -->



    
        <!-- instructions-->
        

        <h3 class="instructions"> Instructions</h3>
        <p class="instructionText"> Choose your vehicle from one of the options below</p>
        <!--Vehicle icons go below-->
        <div class="icons">

            <img src="assets/images/taxi.png" width="90px">
            <img src="assets/images/uberX.png" width="90px">
            <img src="assets/images/lux.png" width="90px">
            <img src="assets/images/SUV.png" width="90px">
        </div><br>
        <!-- UserName-->
        <p class="instructionText"> Enter your username to keep track of your progress and see how you fare against your fellow drivers</p>

        <!--Music-->
        <p class="instructionText">You have the option to play music while you cruise the streets of Chicago</p>

        <!--User How to-->
        <p class="instructionText"> How to control your drive: Using the
            <!--User How to-->
            <br>
          <div class="direction-btns">
            
                <button class="btn btn-default btn-sm up-button">
                    <span class="glyphicon glyphicon-arrow-up"></span>
                </button><br>
            

            <button class="btn btn-default btn-sm left-button">
                <span class="glyphicon glyphicon-arrow-left"></span>
            </button>


            <button class="btn btn-default btn-sm right-button">
                <span class="glyphicon glyphicon-arrow-right"></span>
            </button><br>
            
            <button class="btn btn-default btn-sm down-button">
                <span class="glyphicon glyphicon-arrow-down"></span>
            </button>
            </div>

            <br><p class="instructionText">Move your vehicle around the map to pick up passengers
        </p></p> 
        <p class="instructionText"> Once you have your passenger get them to their destination quickly to collect your fare!</p>
        <p class="instructionText"> The faster you get them to their destinations the more chances you have to collect new passengers and boost your
            score.
        </p>
        <p class="instructionText"> Ready to go? </p>
    

              <!-- End Model Content -->
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>
    </div>
          </form>
      
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>
<div class="container">
<!--Top nav end -->
  
        <div class="top-control-panel">
      <div class="row">
          <div class="col-sm-12" style="background-color:#e7e7e7;"><br>
            <!--  Insert top control pannel--> 

      
        </div>
          </div>
            
      
    <div class="left-control-panel">
      <div class="row">
          <div class="col-sm-2">
            <!-- Insert left control pannel-->

            <div><img src="assets/images/uber_logo.png" class="logo"></div>
						<button type="button" class="btn btn-default timer-container" id="#run-the-timer"><span class="glyphicon glyphicon-time" aria-hidden="true"></span> Remaining<br><span style="font-size:20px"><span class="minute">03</span>:<span class="second">45</span></span></button>
            <button type="button" class="btn btn-default"><span class="glyphicon glyphicon-road" aria-hidden="true"></span> Routes<br><span style="font-size:20px">Chicago</span></button>
            <button type="button" class="btn btn-default"><span class="glyphicon glyphicon-usd" aria-hidden="true"></span> Winnings<br><span style="font-size:20px">$98:21</span></button><br>
    
              
              <img id="imageUsed" src="assets/images/taxi.png"><br>

 



<!-- Button for Popup Setting window-->
      <button onclick="document.getElementById('id01').style.display='block'" class="w3-button w3-default btn-default">
      <span class="glyphicon glyphicon-cog"></span> Settings</button>
            
          
          
          </div>


  
        
      <div class="main-content-pannel">
        <div class="col-sm-10" style="background-color:white;"><br>
      <!--  Insert form-->
<!-- Wells for displaying all users -->
        <div class="col-lg-12">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h3 class="panel-title">Uber Rides</h3>
            </div>
            <div class="panel-body">
<table class="table table-hover">
  <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col">Distance (miles)</th>
      <th scope="col">Duration (mins)</th>
      <th scope="col">Fare</th>
    </tr>
  </thead>
  <tbody class="member-list">
</table>
<input class ="btns" type="button" value="New Ride" id="add-ride" onClick="window.location.reload()">
    
          <div id="floating-panell">
    
         <select hidden="hidden">
              <option  id="start" value="">A</option>
        </select>
          <select hidden="hidden">
             <option id="end" value="">B</option>
                </select>
  </div>

  
  
      <div id="map"  ></div>
    <div id="pano" ></div>
</div>
</div>
<script type="text/javascript">

    var randomLat = ((Math.random() * (41.744310 - 42.018328) + 42.018328))
    var randomLong = (Math.random() * (-87.666084 - (-87.733375)) + (-87.733375))
    var strLat = randomLat.toString()
    var strLong = randomLong.toString()
    var fenway = strLat + ', ' + strLong
    var randomLat2 = (Math.random() * (41.744310 - 42.018328) + 42.018328).toString()
    var randomLong2 = (Math.random() * (-87.666084 - (-87.733375)) + (-87.733375)).toString()
    var dropOff = randomLat2 + ', ' + randomLong2

//Find distance function
function getDistanceFromLatLonInMi(lat1,lon1,lat2,lon2) {
  var R = 6371; // Radius of the earth in miles
  var dLat = deg2rad(lat2-lat1);  // deg2rad below
  var dLon = deg2rad(lon2-lon1); 
  var a = 
    Math.sin(dLat/2) * Math.sin(dLat/2) +
    Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * 
    Math.sin(dLon/2) * Math.sin(dLon/2)
    ; 
  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
  var d = R * c; // Distance in mi
  return d;
}

function deg2rad(deg) {
  return deg * (Math.PI/180)
}
//Console.log to make sure it works
console.log(getDistanceFromLatLonInMi(randomLat, randomLong, randomLat2, randomLong2));
var distanceTraveled = getDistanceFromLatLonInMi(randomLat, randomLong, randomLat2, randomLong2);
//Create durationTraveled variable and console.log to check if it works
  var durationTraveled = getDistanceFromLatLonInMi(randomLat, randomLong, randomLat2, randomLong2) * 2.16;
  console.log(durationTraveled);

//Set UberPool Rates
  var uberPstart = 1.70;
  var uberPmile = .95;
  var uberPmin = .14;
  var uberPminFare = 4.60;
//Calculate rates
  var uberPoolfee = uberPstart + (distanceTraveled * uberPmile) + (durationTraveled * uberPmin);
//Convert to 2 decimal places
  uberPoolfee = uberPoolfee.toFixed(2);
  //Console.log UberX Fee
  console.log("UberPool Fee: " + uberPoolfee);

//Set UberX Rates
  var uberXstart = 1.70;
  var uberXmile = .95;
  var uberXmin = .20;
  var uberXminFare = 4.60;

//Calculate rates
  var uberXfee = uberXstart + (distanceTraveled * uberXmile) + (durationTraveled * uberXmin);
//Convert to 2 decimal places
  uberXfee = uberXfee.toFixed(2);
  //Console.log UberX Fee
  console.log("UberX Fee: " + uberXfee);

//Set UberXl Rates
  var uberXlstart = 3.00;
  var uberXlmile = 1.80;
  var uberXlmin = .35;
  var uberXlminFare = 8.90;
//Calculate rates
  var uberXlfee = uberXlstart + (distanceTraveled * uberXlmile) + (durationTraveled * uberXlmin);
//Convert to 2 decimal places
  uberXlfee = uberXlfee.toFixed(2);
  //Console.log UberX Fee
  console.log("UberXL Fee: " + uberXlfee);

  //Set UberSelect Rates
  var uberSelectstart = 4.00;
  var uberSelectmile = 2.05;
  var uberSelectmin = .35;
  var uberXlminFare = 10.90;
//Calculate rates
  var uberSelectfee = uberSelectstart + (distanceTraveled * uberSelectmile) + (durationTraveled * uberSelectmin);
//Convert to 2 decimal places
  uberSelectfee = uberSelectfee.toFixed(2);
  //Console.log UberX Fee
  console.log("UberSelect Fee: " + uberSelectfee);


$(".member-list").append("<tr><td><name='record'></td><td>" + distanceTraveled +  "</td><td>" + durationTraveled + "</td><td>" + "$" +uberSelectfee + "</td><td>" + "</td></tr>");
  

    function distance() {

      var start
      var end
      console.log(strLat);
    }

    $('#start').val(fenway)
    $('#end').val(dropOff)

      function initMap() {
        var directionsService = new google.maps.DirectionsService;
        var directionsDisplay = new google.maps.DirectionsRenderer;
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 7,
          center: {lat: randomLat, lng: randomLong}
        });
        directionsDisplay.setMap(map);


        var berkeley = {lat: randomLat, lng: randomLong};
        var sv = new google.maps.StreetViewService();
        panorama = new google.maps.StreetViewPanorama(document.getElementById('pano'));
        sv.getPanorama({location: berkeley, radius: 50}, processSVData);
        function processSVData(data, status) {
        if (status === 'OK') {


             panorama.setPano(data.location.pano);
             panorama.setPov({
             heading: 270,
             pitch: 0
             });
             panorama.setVisible(true);

        }}

        var onChangeHandler = function() {
          calculateAndDisplayRoute(directionsService, directionsDisplay);
        };
        document.getElementById('start').addEventListener('change', onChangeHandler());
        document.getElementById('end').addEventListener('change', onChangeHandler());
        


      function calculateAndDisplayRoute(directionsService, directionsDisplay) {
        directionsService.route({
          origin: document.getElementById('start').value,
          destination: document.getElementById('end').value,
          travelMode: 'DRIVING',
          unitSystem: google.maps.UnitSystem.IMPERIAL,
          avoidHighways: false,
          avoidTolls: false
        }, function(response, status) {
          if (status === 'OK') {
            directionsDisplay.setDirections(response);
          } else {
            window.alert('Directions request failed due to ' + status);
          }
        });
      }}


</script>

      
          </div>
        </div>
      </div>

<!-- Insert Popup Setting window-->


<div id="id01" class="w3-modal">
    <div class="w3-modal-content">
      <div class="setting-container">
        <span onclick="document.getElementById('id01').style.display='none'" class="w3-button w3-display-bottomright">Save Settings</span>
<div class="control-pannel">
            <h2><span class="glyphicon glyphicon-cog"></span> Settings</h2>
            <hr size="2px">
                <div class="row">
        <div class="col-sm-6">
                   
  <p><span class="glyphicon glyphicon-road"></span> Location<select class="form-control" id="location" width="150px">
                            <option>Chicago</option>
                            <option>New York</option>
                            <option>Los Angeles</option>
                          </select></p></div>
                          <div class="col-sm-6">
                                <p><span class="glyphicon glyphicon-headphones"></span> Music</p>
                                <iframe scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/playlists/454350105&color=%23ff5500&auto_play=false&hide_related=false&show_comments=false&show_user=false&show_reposts=false&show_teaser=false&visual=false&download=false&sharing=false"></iframe></div>
                        </div><br>
      <div class="vehicles">
             
      <h3>Select a Vehicle</h3>
      <div class="btn-group" data-toggle="buttons">
        <label class="btn btn-default" data-image="assets/images/taxi.png"><img src="assets/images/taxi.png" width ="90px">
        <input type="radio" class='car'  name="options1" id="uberPool" autocomplete="off">
        <span class="glyphicon glyphicon-ok t"></span>
        <br>Pool
        </label>

      <label class="btn btn-default " data-image="assets/images/uberX.png"><img src="assets/images/uberX.png" width ="90px">
        <input type="radio" class='car'  name="options2" id="uberX" autocomplete="off">
        <span class="glyphicon glyphicon-ok t"></span>
        <br>UberX
      </label>
     
        <label class="btn btn-default " data-image="assets/images/lux.png" ><img src="assets/images/lux.png" width ="90px">
        <input type="radio" class='car' name="options3" id="uberSelect"  autocomplete="off">
        <span class="glyphicon glyphicon-ok t"></span>
        <br>Select
      </label>

            <label class="btn btn-default " data-image="assets/images/SUV.png"><img src="assets/images/SUV.png" width ="90px">
        <input type="radio" class='car'  name="options4" id="uberXl" autocomplete="off">
        <span class="glyphicon glyphicon-ok t"></span>
        <br>UberXL
      </label>


      



</div>
      </div>
    </div>
  </div>
</div>
    <!-- End PopUp Setting Window -->   

    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
<script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBBul3aaE5n_RsZh1-ZsHQ7AwNULrFAE5E&callback=initMap">
 </script>


</body>
</html>
